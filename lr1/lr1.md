Создаём связь между виртуальными машинами

![](1.jpg)
![](2.jpg)
![](3.jpg)

Запускаем keycloak

![](4.jpg)

Создаём аккаунт админа

![](5.jpg)

Создаём новый realm

![](6.jpg)

Добавляем пользователей

![](7.jpg)
![](8.jpg)

Создаём клиент

![](9.jpg)

Запускаем nextcloud

![](10.jpg)
![](11.jpg)

Добавляем nextcloud в клиент

![](12.jpg)

Авторизация через keycloak

![](13.jpg)

Настраиваем авторизацию OTP

![](14.jpg)
![](15.jpg)
![](16.jpg)
